<!DOCTYPE html>

<html>
<head>
    <title>Chlorine v0.3</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&family=Poppins:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"/>
    <link rel="icon" href="logo.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="dir">
        <span>Games Directory</span>
        <div class="x"><h1>X</h1></div>
        <h2 class="placeholder"></h2>
        <h2 class="dir-text">All directories run using port 443 by default<br>Remember to use cln:// instead of https://<br><br>
            cln://big-tower-tiny-square.io<br>
            cln://big-tower-tiny-square2.io<br>
            cln://big-ice-tower.io<br>
            cln://big-flappy-tower.io<br>
            cln://big-neon-tower.io<br><br>
        </h2>
    </div>

    <div class="info">
        <span>Connection Info</span>
        <div class="x"><h1>X</h1></div>
        <p class="ip-info">Loading...</p>
        <img src="github.svg" width="20%">
    </div>

    <div class="load">
        <span>Loading or something...</span>
        <div class="loading-container"><div class="loading-bar"></div></div>
    </div>

    <div class="container">
        <div class="title">
            <img src="logo.png" alt="Logo" style="height: 15vh;">
            <h1>Chlorine <br><span style="color: #bdbdbd;">v0.3</span></h1>
        </div>

        <input type="text" placeholder="Use cln://" class="search-bar" autocomplete="off">
    </div>

    <div class="footer">
        <button class="dir-button">
            <h1>Games Directory</h1>
            <span class="material-symbols-outlined">arrow_forward</span>
        </button>

        <div class="glow"></div>

        <button class="info-button">
            <h1>Connection Info</h1>
            <span class="material-symbols-outlined">arrow_forward</span>
        </button>
    </div>

        <a class="download" href="logo.png" download="ChlorineInstaller.exe">
            <h1>Download</h1> 
            <span class="material-symbols-outlined" style="margin-right: 0;">download</span>
        </a>

    <script>
     
        const input = document.querySelector('.search-bar');
        const dirButton = document.querySelector('.dir-button');
        const infoButton = document.querySelector('.info-button');
        const materialSymbolsOutlined = document.querySelector('.material-symbols-outlined');
        const materialSymbolsOutlinedInfo = infoButton.querySelector('.material-symbols-outlined');
        const dir = document.querySelector('.dir');
        const info = document.querySelector('.info');
        const xs = document.querySelectorAll('.x');
        const glow = document.querySelector('.glow');
        const download = document.querySelector('.download');
        const load = document.querySelector('.load');

        // Search bar result
        input.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
        const url = input.value.trim();
        load.style.animation = 'popup 0.2s ease-out forwards';
        load.style.display = 'flex';

        (async () => {
        await new Promise(r => setTimeout(r, 3000));
        load.style.display = 'none';

        if (url === 'cln://big-tower-tiny-square.io') {
        window.open('btts.html', 'newwindow', 'width=1000, height=600');
        } else {
        window.open('https://error', 'newwindow', 'width=1000, height=600');
        }

        })();
        }});

        // Glow
        function showGlow(left) {
        Object.assign(glow.style, {
            width: '20vw',
            height: '7.5vh',
            top: '0',
            left,
            display: 'block',
            animation: 'rotate 3s linear infinite, enlarge 0.5s ease-out forwards'
        }); 
        }

        dirButton.addEventListener('mouseover', () => {
        showGlow('0.5vw');
        });

        infoButton.addEventListener('mouseover', () => {
        showGlow('26.5vw');
        });

        dirButton.addEventListener('mouseout', () => {
        glow.style.display = 'none';
        });
        
        infoButton.addEventListener('mouseout', () => {
        glow.style.display = 'none';
        });

        // Clicking on a button
        dirButton.addEventListener('click', () => {
        dir.style.animation = 'popup 0.2s ease-out forwards';
        dir.style.display = 'block';
        });

        infoButton.addEventListener('click', () => {
        info.style.animation = 'popup 0.2s ease-out forwards';
        info.style.display = 'block';
        });
        
        // Download button
        window.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => {
        download.style.display = 'flex';
        download.style.animation = 'slide-in 0.2s ease-out forwards';
        }, 1000);
        });

        download.addEventListener('click', () => {
        download.style.display = 'none';    
        });
        
        // Close button
        xs.forEach(btn => {
        btn.addEventListener('click', () => {
        const panel = btn.closest('.dir') || btn.closest('.info');
        if (panel) panel.style.display = 'none';
        });
        });

        // IP info fetch request
        fetch('https://ipwho.is/?format=json/')
        .then(response => response.json())
        .then(data => {
        const city = data.city;
        const country = data.country;
        const region = data.region_code;
        const isp = data.connection.isp;
        const ip = data.ip;
        const postal = data.postal;

        document.querySelector('.ip-info').innerText = `${ip}\n${isp}\n${city} ${region}, ${country}, ${postal}`;
        })
        .catch(error => {
        document.querySelector('.ip-info').innerText = 'Error :/';
        });

    </script>
</body>
</html> 
